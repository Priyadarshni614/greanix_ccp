<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GREANIX - Consumption & Diet</title>
  <style>
    /* CSS is unchanged */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      overscroll-behavior: none;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
      color: #343a40;
      line-height: 1.6;
    }

    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #ffffff;
      padding: 10px 30px;
      border-bottom: 3px solid #28a745;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    }

    .navbar-left { display: flex; align-items: center; }
    .navbar-left img { height: 50px; margin-right: 10px; }
    .navbar-left span { font-size: 22px; font-weight: 600; color: #28a745; }
    .navbar-center a { margin: 0 15px; text-decoration: none; color: #555; font-weight: 500; padding: 8px 16px; border-radius: 8px; }
    .navbar-center a:hover, .navbar-center a.active { background-color: #e9f7ef; color: #155724; }
    
    .steps {
      display: flex;
      justify-content: center;
      margin: 30px 0;
    }

    .step {
      padding: 15px 25px;
      margin: 0 10px;
      border-radius: 12px;
      text-align: center;
      background-color: #ffffff;
      border: 1px solid #dee2e6;
      cursor: pointer;
    }

    .step.active {
      border-color: #28a745;
      background-color: #e9f7ef;
      font-weight: bold;
      color: #155724;
    }

    .form-container {
      max-width: 900px;
      margin: 40px auto;
      background-color: #ffffff;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border: 1px solid #dee2e6;
    }
    
    .form-container h2 { color: #1d4c4f; margin-bottom: 10px; }
    .form-container p { margin-bottom: 30px; }

    .form-group {
      display: flex;
      flex-wrap: wrap;
      gap: 25px;
      margin-bottom: 25px;
    }

    .form-field {
      flex: 1 1 45%;
      display: flex;
      flex-direction: column;
      min-width: 250px;
    }

    label {
      margin-bottom: 8px;
      font-weight: 600;
      color: #343a40;
    }

    input[type="text"] {
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    
    .form-note {
      font-size: 13px;
      color: #777;
      margin-top: 8px;
    }

    .form-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
      border-top: 1px solid #dee2e6;
      padding-top: 25px;
    }

    .form-buttons button {
      padding: 12px 25px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-prev { background-color: #6c757d; color: white; }
    .btn-next { background-color: #28a745; color: white; }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="navbar-left">
      <img src="carbon-logo.png" alt="Logo">
      <span>GREANIX</span>
    </div>
    <div class="navbar-center">
      <a href="ex4.html">Home</a>
      <a href="calculate.html" class="active">Calculator</a>
      <a href="instructions.html">Instructions</a>
      <a href="about.html">About</a>
    </div>
    <div class="navbar-right" id="navbar-right"></div>
  </div>

  <div class="steps">
    <div class="step">Home Energy</div>
    <div class="step">Transportation</div>
    <div class="step active">Consumption</div>
    <div class="step">Results</div>
  </div>

  <div class="form-container">
    <h2>ðŸ›’ Consumption & Diet</h2>
    <p>Provide your household's monthly consumption estimates below.</p>

    <div class="form-group">
      <div class="form-field">
        <label for="rice">Rice & Grains (kg per month)</label>
        <input type="text" id="rice" placeholder="e.g., 20" />
      </div>
      <div class="form-field">
        <label for="pulses">Pulses & Lentils (kg per month)</label>
        <input type="text" id="pulses" placeholder="e.g., 5" />
      </div>
    </div>

    <div class="form-group">
        <div class="form-field">
          <label for="dairy">Dairy Products (liters/kg per month)</label>
          <input type="text" id="dairy" placeholder="e.g., 15" />
        </div>
        <div class="form-field">
          <label for="mutton">Mutton (Goat/Lamb) (kg per month)</label>
          <input type="text" id="mutton" placeholder="e.g., 1" />
        </div>
    </div>
      
    <div class="form-group">
        <div class="form-field">
            <label for="chicken">Chicken & Other Poultry (kg per month)</label>
            <input type="text" id="chicken" placeholder="e.g., 3" />
        </div>
        <div class="form-field">
            <label for="fish">Fish & Seafood (kg per month)</label>
            <input type="text" id="fish" placeholder="e.g., 2" />
        </div>
    </div>

    <div class="form-group">
      <div class="form-field">
        <label for="shopping">Non-Food Shopping (items per month)</label>
        <input type="text" id="shopping" placeholder="e.g., 4" />
      </div>
    </div>

    <div class="form-buttons">
      <button class="btn-prev" onclick="window.location.href='transportation.html'">Previous Step</button>
      <button class="btn-next" onclick="saveDataAndContinue()">View Results</button>
    </div>
  </div>

<script>
  function saveDataAndContinue() {
    const getValue = (id) => parseFloat(document.getElementById(id).value) || 0;
    let allData = JSON.parse(localStorage.getItem('carbonFootprintData')) || {};

    const consumptionData = {
      riceKg: getValue('rice'),
      pulsesKg: getValue('pulses'),
      dairyKg: getValue('dairy'),
      muttonKg: getValue('mutton'),
      chickenKg: getValue('chicken'),
      fishKg: getValue('fish'),
      shoppingItems: getValue('shopping')
    };
    allData.consumption = consumptionData;
    
    // Step 1: Define Emissions Factors (example values in kgCOâ‚‚e per unit)
    const emissionFactors = {
      // Home Energy
      electricity: 0.5,
      naturalGas: 2.5,
      kerosene: 3,
      lpg: 3.5,
      wood: 2,
      solar: -0.1, // Solar reduces the footprint
      // Transportation
      car: 0.2,
      bus: 0.05,
      train: 0.02,
      flight: 0.25, // Based on km input
      // Consumption & Diet
      rice: 1.5,
      pulses: 0.8,
      dairy: 2.4,
      mutton: 30,
      chicken: 6,
      fish: 5,
      shopping: 5
    };
    
    // Step 2: Calculate Emissions for each category from stored data
    const homeEnergyData = allData.homeEnergy || {};
    const homeEnergyEmissions = (homeEnergyData.electricity * emissionFactors.electricity) +
                                (homeEnergyData.naturalGas * emissionFactors.naturalGas) +
                                (homeEnergyData.kerosene * emissionFactors.kerosene) +
                                (homeEnergyData.lpg * emissionFactors.lpg) +
                                (homeEnergyData.wood * emissionFactors.wood) +
                                (homeEnergyData.solar * emissionFactors.solar);

    const transportationData = allData.transportation || {};
    const transportationEmissions = (transportationData.carKm * emissionFactors.car) +
                                    (transportationData.busKm * emissionFactors.bus) +
                                    (transportationData.trainKm * emissionFactors.train) +
                                    (transportationData.flightKm * emissionFactors.flight);

    const consumptionEmissions = (consumptionData.riceKg * emissionFactors.rice) +
                                 (consumptionData.pulsesKg * emissionFactors.pulses) +
                                 (consumptionData.dairyKg * emissionFactors.dairy) +
                                 (consumptionData.muttonKg * emissionFactors.mutton) +
                                 (consumptionData.chickenKg * emissionFactors.chicken) +
                                 (consumptionData.fishKg * emissionFactors.fish) +
                                 (consumptionData.shoppingItems * emissionFactors.shopping);

    // Step 3: Calculate Total Emissions and breakdown
    const totalEmissions = homeEnergyEmissions + transportationEmissions + consumptionEmissions;
    const breakdown = {
      homeEnergy: homeEnergyEmissions,
      transportation: transportationEmissions,
      consumption: consumptionEmissions
    };

    allData.results = {
      total: totalEmissions,
      breakdown: breakdown
    };

    localStorage.setItem('carbonFootprintData', JSON.stringify(allData));
    
    window.location.href = 'results.html';
  }
</script>
<script src="auth.js"></script>
</body>
</html>